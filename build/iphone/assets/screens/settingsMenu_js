var SettingsMenu={_orientationModes:{},inited:!1,pickerInited:!1,windowHeight:500,modal:{},modalNav:{},picker:{},modal_done_btn:{},table:{},picker_view:{},picker_cancel_btn:{},picker_done_btn:{},spacer:{},toolbar:{},picker_data:[],modalBg:{},slide_in:{},slide_out:{},fontSizes:{},_currMode:{},handlePickerDoneBtnClick:{},handlePickerCancelBtnClick:{},handleModalDoneClick:{},handleTableClick:{},_toolbarGradient:{type:"linear",colors:["#888888","#000001"],startPoint:{x:0,y:0},endPoint:{x:0,y:50},backFillStart:!1},navHeaderHeight:40};SettingsMenu.showSettings=function(){SettingsMenu.init(),SettingsMenu.closeButton=Ti.UI.createButton({borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"}}),SettingsMenu.closeButton.title="Close",SettingsMenu.closeButton.height=35,SettingsMenu.closeButton.width=200,SettingsMenu.closeButton.top=20,SettingsMenu.table=Ti.UI.createTableView({style:Ti.UI.iPhone.TableViewStyle.GROUPED,backgroundImage:"images/"+TiUtils.getOsName()+"-images/bg.png",data:[{title:"Enter your own quote",hasChild:!0,header:"Options and Settings"},{title:"Quote Font Size",hasChild:!0},{title:"Email Quote",hasChild:!0},{title:"Copy Quote to Clipboard",hasChild:!0},{title:"Send Feedback",hasChild:!0,header:""}]}),SettingsMenu.table.top=60,SettingsMenu.table.addEventListener("click",SettingsMenu.handleTableClick),SettingsMenu.closeButton.addEventListener("click",SettingsMenu.handleCloseClick),SettingsMenu.modal.add(SettingsMenu.table),SettingsMenu.modal.add(SettingsMenu.closeButton),SettingsMenu.modal.open({modal:!0})},SettingsMenu.handleCloseClick=function(){SettingsMenu.hideSettings()},SettingsMenu.hideSettings=function(){SettingsMenu.modal.close()},SettingsMenu.init=function(){SettingsMenu._orientationModes=[Titanium.UI.LANDSCAPE_LEFT,Titanium.UI.LANDSCAPE_RIGHT,Titanium.UI.PORTRAIT,Titanium.UI.UPSIDE_PORTRAIT],SettingsMenu.slide_in=Titanium.UI.createAnimation({bottom:0}),SettingsMenu.slide_out=Titanium.UI.createAnimation({bottom:-251}),SettingsMenu.modal=Ti.UI.createWindow({height:TiUtils.getAppHeight(),top:0,backgroundColor:"#FFFFFF",backgroundImage:"images/"+TiUtils.getOsName()+"-images/bg.png",statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,fullscreen:!0}),SettingsMenu.modalBg=Ti.UI.createView({height:TiUtils.getAppHeight(),top:0,backgroundColor:"#FFFFFF"}),SettingsMenu.modal.add(SettingsMenu.modalBg),SettingsMenu.modal.orientationModes=SettingsMenu._orientationModes,SettingsMenu.modal_done_btn=Titanium.UI.createButton({title:"Done",height:35,width:200}),SettingsMenu._currMode=Titanium.App.Properties.getString("currMode_preference"),SettingsMenu.modal.setRightNavButton(SettingsMenu.modal_done_btn),SettingsMenu.setSettingsListeners(),Titanium.UI.orientation<3?SettingsMenu.toolbar.top=0:Titanium.UI.orientation>2&&Titanium.UI.orientation<5&&(SettingsMenu.toolbar.top=13)},SettingsMenu.setSettingsListeners=function(){try{SettingsMenu.modal_done_btn.removeEventListener("click",SettingsMenu.handleModalDoneClick),Titanium.Gesture.removeEventListener("orientationchange",SettingsMenu.resetLayout)}finally{SettingsMenu.modal_done_btn.addEventListener("click",SettingsMenu.handleModalDoneClick),Titanium.Gesture.addEventListener("orientationchange",SettingsMenu.resetLayout)}},SettingsMenu.resetLayout=function(){var e=TiUtils.getAppHeight(),t=TiUtils.getAppWidth(),i=TiUtils.getPickerViewHeight();SettingsMenu.toolbar.top=0,"landscape"!==TiUtils.getOrientation()||TiUtils.isiPad()||(SettingsMenu.toolbar.top=13),SettingsMenu.picker_view.width=t,SettingsMenu.toolbar.width=t,SettingsMenu.picker.width=t,SettingsMenu.picker_view.height=i,SettingsMenu.picker_view.top=e-i},SettingsMenu.setPickerData=function(){for(var e=Titanium.App.Properties.getString("fontSize_preference"),t=0;t<SettingsMenu.fontSizes.length;t++)Titanium.API.info("fontSizes[i].toString(): "+SettingsMenu.fontSizes[t].toString()),SettingsMenu.fontSizes[t].toString()==e?(Titanium.App.Properties.setString("fontSizeRowIndex_preference",t.toString()),SettingsMenu.picker_data.push(Titanium.UI.createPickerRow({title:SettingsMenu.fontSizes[t].toString(),selected:!0}))):SettingsMenu.picker_data.push(Titanium.UI.createPickerRow({title:SettingsMenu.fontSizes[t].toString()}))},SettingsMenu.handlePickerDoneBtnClick=function(){Titanium.App.fireEvent("fontSizeChanged",{data:SettingsMenu.picker.getSelectedRow(0).title}),Titanium.App.Properties.setString("fontSize_preference",SettingsMenu.picker.getSelectedRow(0).title),"game"!==SettingsMenu._currMode&&TiUtils.showAlertDialog("Alert","The font size will be changed on the game memorizer screen.",["OK"]),SettingsMenu.hidePicker()},SettingsMenu.handleModalDoneClick=function(){SettingsMenu.hideSettings()},SettingsMenu.handleTableClick=function(e){var t=e.rowData.title;"Enter your own quote"===t?(Titanium.API.info("clicked Enter your own quote"),Titanium.App.Properties.setString("quoteEditAction_preference","add"),SettingsMenu.modal.close(),Titanium.App.fireEvent("closeSettingsMenuEvent",{}),Titanium.App.fireEvent("showQuoteEditorEvent",{})):"Quote Font Size"===t?SettingsMenu.showPicker():"Email Quote"===t?Titanium.App.fireEvent("emailQuoteEvent",{}):"Copy Quote to Clipboard"===t?Titanium.App.fireEvent("copyQuoteEvent",{}):"Send Feedback"===t&&Titanium.App.fireEvent("sendFeedback",{})},SettingsMenu.showPicker=function(){Titanium.API.info("clicked Font Size"),SettingsMenu.pickerInited?SettingsMenu.setPickerData():(SettingsMenu.pickerInit(),SettingsMenu.pickerInited=!0),SettingsMenu.modal.add(SettingsMenu.picker_view),SettingsMenu.picker_view.height=TiUtils.getPickerViewHeight(),SettingsMenu.picker_view.top=TiUtils.getAppHeight()-TiUtils.getPickerViewHeight(),SettingsMenu.picker_view.width=TiUtils.getAppWidth(),SettingsMenu.picker.setSelectedRow(0,Number(Titanium.App.Properties.getString("fontSizeRowIndex_preference"))),Titanium.API.info("font preference:"+Titanium.App.Properties.getString("fontSize_preference")),SettingsMenu.picker_view.visible=!0},SettingsMenu.hidePicker=function(){SettingsMenu.picker_view.visible=!1},SettingsMenu.pickerInit=function(){var e=(Titanium.UI.iPhone.SystemButtonStyle.BORDERED,Titanium.UI.iPhone.SystemButtonStyle.DONE);Titanium.API.info("pickerInit()1"),SettingsMenu.picker_view=Titanium.UI.createView({width:TiUtils.getAppWidth(),backgroundColor:"#666666"}),SettingsMenu.picker_done_btn=Titanium.UI.createButton({title:"Done",style:e}),SettingsMenu.picker_done_btn.addEventListener("click",SettingsMenu.handlePickerDoneBtnClick),SettingsMenu.picker=Titanium.UI.createPicker({top:43,selectionIndicator:!0}),SettingsMenu.toolbar=Titanium.UI.createToolbar({top:0,items:[SettingsMenu.picker_done_btn]}),SettingsMenu.fontSizes=[12,14,16,18,20,22,24,26,28,30],SettingsMenu.fontSizes=[20,22,24,26,28,30,32,34,36,38,40,47,50,52,54,56,58,60,62,64,66,68,70],SettingsMenu.setPickerData(),SettingsMenu.picker.add(SettingsMenu.picker_data),SettingsMenu.picker_view.add(SettingsMenu.toolbar),SettingsMenu.picker_view.add(SettingsMenu.picker)};